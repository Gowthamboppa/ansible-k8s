---
 - name: CREATING THE K8S WORKSTATION
   hosts: all
   become: yes
   gather_facts: false
  

   tasks:
   - name: DOWNLOADING THE AWS CLI ZIP FILE 
     get_url:
      url: https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip
      dest: /home/centos/

   - name: INSTALLING UNZIP
     yum:
        name: unzip
        state: latest
   - name: UNZIPPING THE AWS CLI 
     unarchive:
        src: /home/centos/awscli-exe-linux-x86_64.zip
        dest: /home/centos/
        remote_src: yes
   - name: RUN THE COMMAND
     command: ./aws/install --update
     
     
   - name: DOWNLOADING THE KOPS BINARY
     get_url:
        url: https://github.com/kubernetes/kops/releases/download/v1.20.0/kops-linux-amd64
        dest: /usr/local/bin/kops
     
   - name: MAKE KOPS BINARY EXECUTABLE
     command: chmod +x /usr/local/bin/kops

   - name: DOWNLOADING KUBECTL BINARY
     get_url:
        url: https://dl.k8s.io/release/v1.26.0/bin/linux/amd64/kubectl
        dest: /usr/local/bin/kubectl

   - name: MAKE KUBECTL BINARY EXECUTABLE
     command: chmod +x /usr/local/bin/kubectl

   - name: create S3 bucket
     s3_bucket:
        name: myansiblebucket123
        aws_access_key: mys3user
        aws_secret_key: YgY6A1@Q 
        state: present
   - name: Generate SSH keypair
     openssh_keypair:
        path: /home/centos/.ssh/id_rsa
        state: present
   - name: Create the Kops cluster
     command: kops create cluster --yes --state=s3://myansiblebucket123 --zones=us-east-1a,us-east-1b --node-count=2 --name=boppa.k8s.local        

    


 
          
        
  
        
...




